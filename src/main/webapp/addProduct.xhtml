<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://xmlns.jcp.org/jsf/html"      
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      >
      <!-- xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"  -->
      
<h:head>
    <meta charset="UTF-8" />
    <title>יצירת מוצר חדש</title>
    <h:outputStylesheet library="css" name="addproduct.css" />
    <h:outputStylesheet library="css" name="messages.css" />
    <h:outputStylesheet library="css" name="login.css" rendered="#{not loginBean.admin}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</h:head>
<h:body>

	<ui:include src="/WEB-INF/templates/messages.xhtml"/>

	<ui:include src="/WEB-INF/templates/adminLogin.xhtml" rendered="#{not loginBean.admin}"/>

	<h:panelGroup rendered="#{loginBean.admin}" >
		<div class="container">
		    <div class="goBack">
		        <h:link outcome="admin.xhtml" value="לכל המוצרים" > 
		        	<i class="fa fa-angle-left" />
		        </h:link>
		    </div>
		    
		    <h1 class="page-title">צור מוצר חדש</h1>
		    
		    <h:form id="productForm" styleClass="product-form" enctype="multipart/form-data" >
		     

	            
			<!-- decorative image styling: have issues maybe I will change it -->
		     <!--       <h:panelGroup class="image-preview" id="image-preview">
		           
			            <h:panelGroup rendered="#{addProduct.image == null}">
			            	<h:outputLabel for="image" value="העלה תמונה">
			            		<i class="fa fa-plus" />
			            	</h:outputLabel>
		            	</h:panelGroup>
			            	
		            	<h:panelGroup rendered="#{addProduct.image != null}">
		            		<h:graphicImage value="#{addProduct.imagePath}" style="max-width:200px; max-height:200px;" />
		            	</h:panelGroup>
		            	
		           		<h:inputFile id="image" value="#{addProduct.image}" styleClass="hidden-file" accept="images/*" > 
	  		           		<f:ajax onevent="handleRefresh"/>
			           		<f:ajax event="change" listener="#{addProduct.handleImageUpload}" render="image-preview" />
		           		</h:inputFile>
		           
		           </h:panelGroup>
		           
	-->
		            
  
		    	<div class="form-group">
		        <!-- <fieldset id="productFSet"> -->
		            <h:outputLabel for="productName" value="שם מוצר:" />
		            <h:inputText id="productName" value="#{addProduct.productName}" styleClass="text-input" >
		            	<f:passThroughAttribute name="placeholder" value="כתוב את שם המוצר" />
	            	</h:inputText>
		            <h:message for="productName" style="color:red;" showDetail="true" showSummary="false" />
	            </div>
	
	            <div class="form-group">
		            <h:outputLabel for="description" value="תיאור המוצר:" />
		            <h:inputTextarea id="description" value="#{addProduct.description}" styleClass="textarea-input" >
		            	<f:passThroughAttribute name="placeholder" value="כתוב פירוט קצר על המוצר (לא חובה)" />
		            </h:inputTextarea>
		            <h:message for="description" style="color:red;" showDetail="true" showSummary="false" />
	            </div>
	            
		            
		        <div class="form-group"> 
		        	<h:outputLabel for="category-select" value="קטגוריה:" />
		        	<h:selectOneMenu id="category-select" value="#{addProduct.category}" styleClass="select-input">
		        		<f:selectItems value="#{categoryBean.allActives}" var="category" itemValue="#{category.id}" itemLabel="#{category.name}" />
		        	</h:selectOneMenu>
		        	<h:message for="category-select" style="color:red;" showDetail="true" showSummary="false" />
		        </div> 
		        
		        <div class="form-group">
		        	<h:outputLabel for="price" value="מחיר:" />
		        	<h:inputText id="price" value="#{addProduct.price}" styleClass="text-input" >
	     		        <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
		    			<f:validateDoubleRange minimum="0.0" />
	    			</h:inputText>
	    			<h:message for="price" style="color:red;" showDetail="true" showSummary="false" />
		        </div>
		        
		        <div class="form-group">
		            <h:outputLabel for="image" value="העלה תמונה:" />
	     	 		<h:inputFile id="image" value="#{addProduct.image}" accept="images/*" />
		        </div>
		        
	     		<div class="form-actions">
					<h:commandButton value="צור מוצר חדש" action="#{addProduct.createProduct}" styleClass="submit-button" />
				</div>
		            
		            
		    </h:form>
	    </div>
    </h:panelGroup>
</h:body>
</html>