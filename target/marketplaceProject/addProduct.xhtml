<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://xmlns.jcp.org/jsf/html"      
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      >
      <!-- xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"  -->
      
<h:head>
    <meta charset="UTF-8" />
    <title>Add New Product</title>
    <h:outputStylesheet library="css" name="addprodform.css" />
</h:head>
<h:body>

	<!-- TODO: Change the go back target later -->
    <div id="goBack">
        <h:link outcome="index" value="← Go Back" /> 
    </div>
    
    
    <h2>Add New Product</h2>
    <h:form id="productForm" enctype="multipart/form-data">
        <fieldset id="productFSet">
            <h:inputText id="productName" value="#{addProduct.productName}" />
            <h:outputLabel for="productName" value=":שם מוצר" />
            <h:message for="productName" style="color:red;" />
            <br/>
            
            <h:inputTextarea id="description" value="#{addProduct.description}"  />
            <h:outputLabel for="description" value=":תיאור המוצר" />
            <br/>
            
            
            <!-- TODO: error checks for prices -->   
            <!-- oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/^(\d*\.\d{0,2}).*$/, '$1')" -->         
            <h:inputText id="price" value="#{addProduct.price}"  >
                <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
    			<f:validateDoubleRange minimum="0.0" />
            </h:inputText>
            <h:outputLabel for="price" value=":מחיר" />
            <br/>
            
            <h:inputText id="barcode" value="#{addProduct.barcode}" />
            <h:outputLabel for="barcode" value=":ברקוד" />
            <br/>
            
            <h:selectOneMenu id="category" value="#{addProduct.category}">
                <f:selectItem itemValue="milk" itemLabel="Milk" />
                <f:selectItem itemValue="meat" itemLabel="Meat" />
                <f:selectItem itemValue="vegetables" itemLabel="Vegetables" />
                <f:selectItem itemValue="fruits" itemLabel="Fruits" />
                <f:selectItem itemValue="other" itemLabel="Other" />
            </h:selectOneMenu>
            <h:outputLabel for="category" value=":קטגוריה" />
            <br/>
            
            <h:inputFile id="image" value="#{addProduct.image}" accept="images/*" />
            <h:outputLabel for="image" value=":העלה תמונה" />
            <br/>
            
            <h:commandButton value="Create New Product" action="#{addProduct.createProduct}" />
        </fieldset>
        
        <h:panelGroup rendered="#{not empty error}">
            <fieldset>
                <legend>Invalid data, please try again</legend>
            </fieldset>
        </h:panelGroup>
    </h:form>

</h:body>
</html>